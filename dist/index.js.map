{"version":3,"sources":["../server/index.js"],"names":["MongoClient","require","db","app","server","createServer","connect","uri","database","err","console","error","use","json","limit","bodyLimit","exposedHeaders","corsHeaders","log","__dirname","static","join","listen","port"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAIA,cAAcC,QAAQ,SAAR,EAAmBD,WAArC;AACA,IAAIE,WAAJ;;AAEA,IAAIC,MAAM,wBAAV;AACAA,IAAIC,MAAJ,GAAa,eAAKC,YAAL,CAAkBF,GAAlB,CAAb;;AAEAH,YAAYM,OAAZ,CAAoB,iBAAOJ,EAAP,CAAUK,GAAV,GAAgB,iBAAOL,EAAP,CAAUM,QAA9C,EAAwD,UAACC,GAAD,EAAMD,QAAN,EAAmB;AACzE,MAAIC,GAAJ,EAAS,OAAOC,QAAQC,KAAR,CAAcF,GAAd,CAAP;AACTP,OAAKM,QAAL;;AAEAL,MAAIS,GAAJ,CACE,qBAAWC,IAAX,CAAgB;AACdC,WAAO,iBAAOC;AADA,GAAhB,CADF;;AAMAZ,MAAIS,GAAJ,CACE,oBAAK;AACHI,oBAAgB,iBAAOZ,MAAP,CAAca;AAD3B,GAAL,CADF;;AAMA;AACAd,MAAIS,GAAJ,CAAQ,MAAR,EAAgB,qCAAYV,EAAZ,CAAhB;AACA;AACAQ,UAAQQ,GAAR,CAAY,WAAWC,SAAX,GAAuB,QAAnC;AACAhB,MAAIS,GAAJ,CAAQ,GAAR,EAAa,kBAAQQ,MAAR,CAAe,eAAKC,IAAL,CAAUF,SAAV,EAAqB,QAArB,CAAf,CAAb;;AAEAhB,MAAImB,MAAJ,CAAW,iBAAOlB,MAAP,CAAcmB,IAAzB;AACAb,UAAQQ,GAAR,CAAY,8BAA8B,iBAAOd,MAAP,CAAcmB,IAAxD;AACD,CAxBD;;AA0BA;AACA","file":"index.js","sourcesContent":["import http from \"http\";\nimport path from \"path\";\nimport express from \"express\";\nimport bodyParser from \"body-parser\";\nimport cors from \"cors\";\nimport api from \"./routes/api\";\nimport ui from \"./routes/ui\";\nimport config from \"../config.json\";\n\nlet MongoClient = require(\"mongodb\").MongoClient;\nlet db;\n\nlet app = express();\napp.server = http.createServer(app);\n\nMongoClient.connect(config.db.uri + config.db.database, (err, database) => {\n  if (err) return console.error(err);\n  db = database;\n\n  app.use(\n    bodyParser.json({\n      limit: config.bodyLimit\n    })\n  );\n\n  app.use(\n    cors({\n      exposedHeaders: config.server.corsHeaders\n    })\n  );\n\n  // api router\n  app.use(\"/api\", api(config, db));\n  // ui router\n  console.log(\"\\n\\n\\n\" + __dirname + \"\\n\\n\\n\");\n  app.use(\"/\", express.static(path.join(__dirname, \"client\")));\n\n  app.listen(config.server.port);\n  console.log(\"Server listening on port \" + config.server.port);\n});\n\n// ui router\n//app.use(\"/\", ui({ config, db }));\n"]}